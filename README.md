# 7_LAS_FROST_DynamicData
Script that dynamically ingests data to LAS FROST Server. 

## Dynamic Obs Loading Script

This script handles the loading of dynamic data onto the Lab Service FROST server.
The request is executed by specifying a parameter (in days) that defines the maximum time range over which the AWS API is queried:

```python frost_data_sync_2.2.py 5```

The script relies on a configuration file named parameters, located within the Data folder, which has the following structure:
```
[aws_credentials]
aws_access_key_id = <to fill out>
aws_secret_access_key = <to fill out>
[frost]
username = <to fill out>
password = <to fill out>
server_url = https://frost.labservice.it/FROST-Server/v1.1/
[files]
log_path = ./data/
log_filename = log.csv
log_frost_filename = log_inserimenti.csv
mapping_path = ./data/
mapping_filename = datastreams.csv
```
The file datastreams.csv is an input file used to map the "local" LAS IDs of sensors and parameters to the datastream IDs used on the FROST server.

The files log.csv and log_inserimenti.csv are generated by the script during its first execution and are used to track the outcome of the operations.
They are populated in append mode, thus maintaining a record of all past executions.


### Script to Check Netpid Observations from AWS API

#### Example

The script retrieves responses from the AWS API for the specified sensor station and desired time range (in UNIX format).

The script is run without specifying any parameters:

```python amazon_ed.py```

Before executing the script, you must modify the request_parameters variable within the script to set the desired values.

#### Example of `request_parameters`:

request_parameters = 'machineSN=LS0623020166&tsFrom=1728517200&tsTo=1728608100'

### Historical Data Retrieval Script

This script allows for the retrieval of past observations over a specified number of days by querying the AWS API.  
It relies on the same configuration files — parameters and datastreams.csv — used by frost_data_sync_2.2.py.

To launch the observation retrieval process, use the following command:

```sh batch_insert ```

The batch_insert file has the following structure:

```
echo -n INIZIO BATCH
python frost_sync_pregresso_v1.2.py LS0623020122 1/08/2023 31/08/2023 2
python frost_sync_pregresso_v1.2.py LS0623020122 1/09/2023 30/09/2023 2
python frost_sync_pregresso_v1.2.py LS0623020122 1/10/2023 31/10/2023 2
echo FINE BATCH.
```
For each script execution, the following must be specified:

- The Netpid sensor for which you want to retrieve observations;
- The time range for which you want to obtain data;
- The "days" parameter, which defines the time span of the request.

The retrieved observations will be directly uploaded to the Lab Service FROST server.
